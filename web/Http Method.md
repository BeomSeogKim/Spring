# Http Method 에 대하여

API URI 를 설계할 때 어떻게 짜야 할지 고민이 될 때에는 다음을 생각하자. 
가장 중요한 것은 *리소스 식별* 이다.   
여기서 리소스란 회원 혹은 게시글 과 같은 개념 자체가 바로 리소스이다.  
리소스를 식별하는 것은 등록 수정 조회 같은 행위를 배제 하고 회원 혹은 게시글이라는 리소스만을 고려하면된다.  

예를들어 회원과 관련한 예를 보자면   
* 리소스 : 회원
* 행위 : 조회, 등록, 삭제, 변경
과 같이 구분할 수 있다.   
행위에는 다음과 같은 기능들이 있다. 
* Get : 리소스 조회
* POST : 요청 데이터 처리, 주로 등록에 사용을 함
* PUT : 리소스를 대체, 해당 리소스가 없으면 생성
* PATCH : 리소스 부분을 변경
* DELETE : 리소스 삭제 
이 외에도 HEAD, OPTIONS, CONNECT, TRACE 등이 있지만 자주 사용하는 기능은 아니다.   

### PUT 과 PATCH의 차이 
PUT 과 PATCH의 경우 기능이 유사하지만 큰 차이가 있다. 
PUT의 경우 리소스를 완전히 대체한다는 큰 특징이 있다.    
예를 들어 회원 정보와 관련하여 
```json
"name" : "userA",
"age" : 20
```
이라는 회원이 존재할 때 PUT을 사용하여 
```json
"age" : 50
```
다음과 같이 요청을 보내게 되면 
회원의 정보는 다음과 같이 name 필드는 사라지고 age 필드만 남게 된다. 
```json
"age" : 50
```
이에 반해 PATCH의 경우 리소스의 부분을 변경하는 기능으로써 동일한 회원 정보에 다음과 같이 PATCH 기능을 사용하게 되면
```json
"age" : 50
```
회원 정보는 다음과 같이 수정된다.
```json
"name" : "userA",
"age" : 50
```
이 부분이 PUT과 PATCH의 큰 차이이다.    

다음으로는 자주 사용되는 용어에 대한 간단한 정리를 남겨두려고 함.
## 안전(Safe)
* 호출해도 리소스를 변경하지 않는다. 
* ==> GET, HEAD 와 같은 메서드는 리소스를 변경하지 않으므로 안전하다고 할 수 있다. 

## 멱등(Idempotent)
* f(f(x)) = f(x)
* 한번 호출하든 두 번 호출하든 수백번을 호출하든 결과가 똑같다. 
* GET, PUT, DELETE 의 경우 멱등하다고 할 수 있다.
* POST의 경우 멱등이 아니다. (두번 호출하면 두번의 메서드가 중복해서 발생할 수 있다.)
* 멱등을 사용하는 이유 서버가 정상 응답을 주지못했을 때, 클라이언트가 같은 요청을 다시 해도 되는가의 판단 근거가 됨. 

## 캐시가능(Cacheable)
* 응답 결과 리소스를 캐시해서 사용해도 되는가? 
* GET, HEAD, POST, PATCH 의 경우 캐시 가능 
* 실제로는 이 중 GET, HEAD 정도만 캐시로 사용.
